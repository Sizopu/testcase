# Используем официальный образ с минимальной поддержкой Go
FROM golang:1.22-alpine

# Устанавливаем рабочую директорию в контейнере
WORKDIR /app

# Копируем файлы приложения в рабочую директорию контейнера
COPY . .

# Загружаем зависимости и собираем приложение
RUN go mod tidy && CGO_ENABLED=0 GOOS=linux go build -o main .

# Указываем порт, который будет использовать приложение
ENV PORT=32777

# Открываем порт приложения
EXPOSE 32777

# Команда для запуска приложения
CMD ["./main"]